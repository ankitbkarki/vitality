<!DOCTYPE html><html lang="en-gb"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Bible Verses About Anxiety: 15+ Comforting Scriptures to Calm Your Heart</title><meta name="description" content="Discover powerful Bible verses about anxiety and fear that offer peace, comfort, and hope. Explore how Scripture can help you overcome anxiety with faith."><meta name="generator" content="Publii Open-Source CMS for Static Site"><script type="text/javascript" async src="https://www.googletagmanager.com/gtag/js?id=G-B538RQ55JN"></script><script type="text/javascript">window.dataLayer = window.dataLayer || [];
				  function gtag(){dataLayer.push(arguments);}
				  gtag('js', new Date());
				  gtag('config', 'G-B538RQ55JN' );</script><link rel="canonical" href="https://ankit-karki.com.np/blogs/bible-verses-about-anxiety/"><link rel="alternate" type="application/atom+xml" href="https://ankit-karki.com.np/blogs/feed.xml" title="VITALITY BLOGS - RSS"><link rel="alternate" type="application/json" href="https://ankit-karki.com.np/blogs/feed.json" title="VITALITY BLOGS - JSON"><meta property="og:title" content="Bible Verses About Anxiety: Finding Peace in Scripture"><meta property="og:image" content="https://ankit-karki.com.np/blogs/media/posts/53/Bible-Verses-About-Anxiety-15-Comforting-Scriptures-to-Calm-Your-Heart.png"><meta property="og:image:width" content="1536"><meta property="og:image:height" content="1024"><meta property="og:site_name" content="VITALITY BLOGS"><meta property="og:description" content="Discover powerful Bible verses about anxiety and fear that offer peace, comfort, and hope. Explore how Scripture can help you overcome anxiety with faith."><meta property="og:url" content="https://ankit-karki.com.np/blogs/bible-verses-about-anxiety/"><meta property="og:type" content="article"><link rel="preload" href="https://ankit-karki.com.np/blogs/assets/dynamic/fonts/poppins/poppins.woff2" as="font" type="font/woff2" crossorigin><link rel="stylesheet" href="https://ankit-karki.com.np/blogs/assets/css/style.css?v=c988b5910b85577cf4da5d5fbb75a897"><script type="application/ld+json">{"@context":"http://schema.org","@type":"Article","mainEntityOfPage":{"@type":"WebPage","@id":"https://ankit-karki.com.np/blogs/bible-verses-about-anxiety/"},"headline":"Bible Verses About Anxiety: Finding Peace in Scripture","datePublished":"2025-06-07T15:34-05:00","dateModified":"2025-06-07T15:41-05:00","image":{"@type":"ImageObject","url":"https://ankit-karki.com.np/blogs/media/posts/53/Bible-Verses-About-Anxiety-15-Comforting-Scriptures-to-Calm-Your-Heart.png","height":1024,"width":1536},"description":"Discover powerful Bible verses about anxiety and fear that offer peace, comfort, and hope. Explore how Scripture can help you overcome anxiety with faith.","author":{"@type":"Person","name":"Leon","url":"https://ankit-karki.com.np/blogs/authors/leon-staff-team/"},"publisher":{"@type":"Organization","name":"Leon"}}</script><noscript><style>img[loading] {
                    opacity: 1;
                }</style></noscript></head><body class="post-template"><div class="container"><header class="header" id="js-header"><a href="https://ankit-karki.com.np/blogs/" class="logo">VITALITY BLOGS</a><nav class="navbar js-navbar"><button class="navbar__toggle js-toggle" aria-label="Menu"><span class="navbar__toggle-box"><span class="navbar__toggle-inner">Menu</span></span></button><ul class="navbar__menu"><li><a href="https://ankit-karki.com.np" target="_self">HOME</a></li><li><a href="https://ankit-karki.com.np/#contact" target="_self">CONTACT</a></li><li><a href="https://ankit-karki.com.np/privacy-policy" target="_self">PRIVACY</a></li><li><a href="https://ankit-karki.com.np/terms" target="_self">TERMS</a></li></ul></nav><div class="search"><a href="/blogs/search" class="search__btn" aria-label="Search"><svg role="presentation" focusable="false" height="15" width="15"><use xlink:href="https://ankit-karki.com.np/blogs/assets/svg/svg-map.svg#search"/></svg></a></div></header><main class="post"><article class="content wrapper"><header class="hero"><p class="content__meta">Published on <time datetime="2025-06-07T15:34">June 7, 2025</time></p><h1 class="content__title">Bible Verses About Anxiety: Finding Peace in Scripture</h1></header><figure class="content__featured-image post__image--normal"><img src="https://ankit-karki.com.np/blogs/media/posts/53/Bible-Verses-About-Anxiety-15-Comforting-Scriptures-to-Calm-Your-Heart.png" srcset="https://ankit-karki.com.np/blogs/media/posts/53/responsive/Bible-Verses-About-Anxiety-15-Comforting-Scriptures-to-Calm-Your-Heart-xs.webp 300w, https://ankit-karki.com.np/blogs/media/posts/53/responsive/Bible-Verses-About-Anxiety-15-Comforting-Scriptures-to-Calm-Your-Heart-sm.webp 480w, https://ankit-karki.com.np/blogs/media/posts/53/responsive/Bible-Verses-About-Anxiety-15-Comforting-Scriptures-to-Calm-Your-Heart-md.webp 768w, https://ankit-karki.com.np/blogs/media/posts/53/responsive/Bible-Verses-About-Anxiety-15-Comforting-Scriptures-to-Calm-Your-Heart-lg.webp 1024w, https://ankit-karki.com.np/blogs/media/posts/53/responsive/Bible-Verses-About-Anxiety-15-Comforting-Scriptures-to-Calm-Your-Heart-xl.webp 1360w, https://ankit-karki.com.np/blogs/media/posts/53/responsive/Bible-Verses-About-Anxiety-15-Comforting-Scriptures-to-Calm-Your-Heart-2xl.webp 1600w, https://ankit-karki.com.np/blogs/media/posts/53/responsive/Bible-Verses-About-Anxiety-15-Comforting-Scriptures-to-Calm-Your-Heart-sm2.webp 375w" sizes="(max-width: 1600px) 100vw, 1600px" loading="eager" height="1024" width="1536" alt=""><figcaption>Bible Verses About Anxiety 15+ Comforting Scriptures to Calm Your Heart</figcaption></figure><div class="content__entry"><p>Anxiety is something most of us experience at some point. Whether it's the fear of the unknown, pressure at work, health concerns, or relational stress, that tight feeling in your chest and racing thoughts can be overwhelming. But here’s the good news: the Bible has a lot to say about anxiety. Throughout Scripture, God offers comfort, guidance, and peace to those who are anxious or fearful. In this article, we’ll dive deep into <strong>Bible verses about anxiety</strong>, explore <strong>Bible quotes about anxiety and fear</strong>, and highlight key passages that speak directly to the heart of worry.</p><h2>Understanding Anxiety in the Bible</h2><p>Before jumping into specific <strong>Bible verses for anxiety</strong>, it helps to understand how anxiety is portrayed in the Bible. Anxiety isn't a new phenomenon. Even heroes of faith like David, Elijah, and Paul struggled with fear and emotional turmoil. What makes the biblical narrative powerful is that it doesn’t shy away from these struggles but instead meets them head-on with divine reassurance.</p><h3>Is Anxiety a Sin?</h3><p>Many Christians wonder if feeling anxious is a sign of weak faith or even sin. The short answer: no. Jesus Himself expressed anguish in the Garden of Gethsemane (Matthew 26:36-46). The key is not whether we feel anxiety, but how we respond to it. Scripture encourages us to cast our worries on God, lean into His promises, and seek His peace.</p><h2>Top Bible Verses About Anxiety and Fear</h2><p>Here are some of the most powerful <strong>Bible verses for anxiety</strong> that can bring comfort and clarity when fear creeps in:</p><h3>1. Philippians 4:6-7 (NIV)</h3><blockquote><p><em>"Do not be anxious about anything, but in every situation, by prayer and petition, with thanksgiving, present your requests to God. And the peace of God, which transcends all understanding, will guard your hearts and your minds in Christ Jesus."</em></p></blockquote><p>This passage is often quoted for good reason. It reminds us that prayer is the antidote to anxiety. When we surrender our worries to God, He promises peace that goes beyond human comprehension.</p><h3>2. 1 Peter 5:7 (NIV)</h3><blockquote><p><em>"Cast all your anxiety on him because he cares for you."</em></p></blockquote><p>This short verse carries a massive truth. God cares. He invites us to unload our fears onto Him because His shoulders are strong enough to carry them.</p><h3>3. Isaiah 41:10 (NIV)</h3><blockquote><p><em>"So do not fear, for I am with you; do not be dismayed, for I am your God. I will strengthen you and help you; I will uphold you with my righteous right hand."</em></p></blockquote><p>One of the most comforting <strong>Bible verses on anxiety</strong>, this verse is a direct promise from God. He is present, powerful, and ready to support you.</p><h3>4. Matthew 6:34 (NIV)</h3><blockquote><p><em>"Therefore do not worry about tomorrow, for tomorrow will worry about itself. Each day has enough trouble of its own."</em></p></blockquote><p>In the Sermon on the Mount, Jesus reminds us that anxiety often stems from our obsession with the future. Trusting God one day at a time can release us from the need to control what’s next.</p><h3>5. Psalm 94:19 (NIV)</h3><blockquote><p><em>"When anxiety was great within me, your consolation brought me joy."</em></p></blockquote><p>Even in the Psalms, we see honest confession about mental distress. And yet, God's comfort never fails to follow.</p><h2>Practical Steps: Applying Bible Verses to Daily Anxiety</h2><p>Quoting <strong>Bible verses for anxiety</strong> is helpful, but how do we apply them in real life?</p><h3>1. Memorize Scripture</h3><p>I personally carry around index cards with verses like Philippians 4:6-7. When panic starts rising, I recite them aloud. It grounds me in truth.</p><h3>2. Journal Your Prayers</h3><p>Write down your fears, then write a corresponding verse. This exercise transforms your anxiety into a conversation with God.</p><h3>3. Meditate and Breathe</h3><p>Pair deep breathing with meditation on a verse. For example, inhale while thinking, “Be still,” and exhale while thinking, “and know that I am God” (Psalm 46:10).</p><h3>4. Talk to Someone</h3><p>Sometimes, God’s comfort comes through community. Share your struggles with a trusted friend or counselor who can point you back to Scripture.</p><h2>Anxiety Biblical Verses for Specific Situations</h2><p>Different circumstances trigger different kinds of anxiety. Here are <strong>Bible quotes about anxiety and fear</strong> tailored to specific needs:</p><h3>When You're Facing Uncertainty</h3><p><strong>Proverbs 3:5-6 (NIV)</strong></p><blockquote><p><em>"Trust in the Lord with all your heart and lean not on your own understanding; in all your ways submit to him, and he will make your paths straight."</em></p></blockquote><h3>When You're Feeling Weak or Burned Out</h3><p><strong>2 Corinthians 12:9-10 (NIV)</strong></p><blockquote><p><em>"My grace is sufficient for you, for my power is made perfect in weakness."</em></p></blockquote><h3>When You Can’t Sleep Due to Worry</h3><p><strong>Psalm 4:8 (NIV)</strong></p><blockquote><p><em>"In peace I will lie down and sleep, for you alone, Lord, make me dwell in safety."</em></p></blockquote><h3>When You’re Afraid of What People Think</h3><p><strong>Isaiah 51:12 (NIV)</strong></p><blockquote><p>*"I, even I, am he who comforts you. Who are you that you fear mere mortals...?"</p></blockquote><h2>What the Bible Teaches About Anxiety: A Deeper Look</h2><p>Beyond individual verses, the Bible tells a bigger story about anxiety and fear:</p><h3>1. God Is in Control</h3><p>Anxiety often comes from trying to control what we can't. The Bible constantly reassures us that God is sovereign.</p><h3>2. We Are Not Alone</h3><p>From the prophets to the apostles, biblical figures experienced deep distress. Their stories remind us that our struggle is not unique, and we are never alone.</p><h3>3. God Offers Real Peace</h3><p>Not superficial calm, but a soul-deep serenity. Jesus says in John 14:27, *"Peace I leave with you; my peace I give you... Do not let your hearts be troubled and do not be afraid."</p><h2>Real-Life Testimony: How Bible Verses for Anxiety Helped Me</h2><p>There was a season in my life when anxiety nearly paralyzed me. Each morning felt like an uphill battle. One day, I stumbled upon Psalm 55:22:</p><blockquote><p><em>"Cast your cares on the Lord and he will sustain you."</em></p></blockquote><p>I wrote it on a sticky note and placed it on my mirror. Over time, as I meditated on it and let it sink in, I noticed something shift. The circumstances didn’t change right away, but my mindset did. That’s the power of Scripture.</p><h2>FAQ: Bible Verses About Anxiety</h2><h3>What is the best Bible verse for anxiety?</h3><p>One of the most cited is Philippians 4:6-7. It addresses anxiety directly and offers a path to peace through prayer and thanksgiving.</p><h3>Are there Bible verses that help with panic attacks?</h3><p>Yes. Try Psalm 23, Isaiah 41:10, and 1 Peter 5:7. Meditating on these during a panic episode can be incredibly soothing.</p><h3>What does Jesus say about anxiety?</h3><p>In Matthew 6:25-34, Jesus teaches not to worry about life’s necessities, encouraging us to seek God's kingdom first.</p><h3>Can reading the Bible reduce anxiety?</h3><p>Absolutely. Scripture has a grounding effect. Its truths remind us of God’s presence, provision, and promises.</p><h3>Should I feel guilty for having anxiety as a Christian?</h3><p>No. Anxiety is part of the human experience. The key is to bring it to God and not let it define your faith.</p></div><footer class="content__footer"><div class="content__last-updated">This article was updated on June 7, 2025</div><div class="content__footer__col"><ul class="content__tag"><li><a href="https://ankit-karki.com.np/blogs/tags/anxiety/">Anxiety</a></li></ul><div class="content__share"></div></div><nav class="content__nav"><div class="content__nav__prev">Previous Post<h5><a href="https://ankit-karki.com.np/blogs/daily-journal-prompts-for-mental-health/" class="invert" rel="prev">Daily Journal Prompts for Mental Health: Effective Journaling Prompts</a></h5></div><div class="content__nav__next">Next Post<h5><a href="https://ankit-karki.com.np/blogs/health-benefits-of-cumaseba/" class="invert" rel="next">Health Benefits of Cumaseba: The Amazon’s Hidden Treasure</a></h5></div></nav></footer></article></main><footer class="footer"><div class="footer__nav"><ul class="navbar__menu"><li><a href="https://ankit-karki.com.np" target="_self">HOME</a></li><li><a href="https://ankit-karki.com.np/#contact" target="_self">CONTACT</a></li><li><a href="https://ankit-karki.com.np/privacy-policy" target="_self">PRIVACY</a></li><li><a href="https://ankit-karki.com.np/terms" target="_self">TERMS</a></li></ul></div><div class="footer__copyright">© 2025 Vitality Blogs. All rights reserved.</div></footer></div><script defer="defer" src="https://ankit-karki.com.np/blogs/assets/js/scripts.min.js?v=4268bfae06e330d473c424d50f09abda"></script><script>window.publiiThemeMenuConfig={mobileMenuMode:'sidebar',animationSpeed:300,submenuWidth: 'auto',doubleClickTime:500,mobileMenuExpandableSubmenus:true,relatedContainerForOverlayMenuSelector:'.navbar'};</script><script>/*<![CDATA[*/var images=document.querySelectorAll("img[loading]");for(var i=0;i<images.length;i++){if(images[i].complete){images[i].classList.add("is-loaded")}else{images[i].addEventListener("load",function(){this.classList.add("is-loaded")},false)}};/*]]>*/</script><div class="pcb" data-behaviour="badge" data-behaviour-link="#cookie-settings" data-revision="1" data-config-ttl="90" data-debug-mode="false"><div role="dialog" aria-modal="true" aria-hidden="true" aria-labelledby="pcb-title" aria-describedby="pcb-txt" class="pcb__banner"><div class="pcb__inner"><div id="pcb-title" role="heading" aria-level="2" class="pcb__title">This website uses cookies</div><div id="pcb-txt" class="pcb__txt">Select which cookies to opt-in to via the checkboxes below; our website uses cookies to examine site traffic and user activity while on our site, for marketing, and to provide social media functionality. <a href="https://leonstaff.com/privacy-policy.html">More details...</a></div><div class="pcb__buttons"><button type="button" class="pcb__btn pcb__btn--link pcb__btn--configure" aria-haspopup="dialog">Manage preferences</button> <button type="button" class="pcb__btn pcb__btn--solid pcb__btn--accept">Accept all</button></div></div></div><div class="pcb__popup" role="dialog" aria-modal="true" aria-hidden="true" aria-labelledby="pcb-popup-title"><div class="pcb__popup__wrapper"><div class="pcb__inner pcb__popup__inner"><div class="pcb__popup__heading"><div id="pcb-popup-title" role="heading" aria-level="2" class="pcb__title">Cookie settings</div><button class="pcb__popup__close" aria-label="Close"></button></div><div class="pcb__popup__content"><div class="pcb__txt pcb__popup__txt">We use cookies to enhance your browsing experience, serve personalized ads or content, and analyze our traffic. By clicking "Accept All", you consent to our use of cookies. <a href="https://leonstaff.com/privacy-policy.html">More details...</a></div><ul class="pcb__groups"><li class="pcb__group"><details><summary class="pcb__group__title no-desc">Required</summary></details><div class="pcb__popup__switch is-checked"><input type="checkbox" data-group-name="" id="pcb-group-0" checked="checked"> <label for="pcb-group-0">Required</label></div></li></ul></div><div class="pcb__buttons pcb__popup__buttons"><button type="button" class="pcb__btn pcb__btn--solid pcb__btn--accept">Accept all</button> <button type="button" class="pcb__btn pcb__btn--reject">Reject all</button> <button type="button" class="pcb__btn pcb__btn--save">Save settings</button></div></div></div></div><div class="pcb__overlay" aria-hidden="true"></div><button class="pcb__badge" aria-label="Cookie Policy" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" width="40" height="40" viewBox="0 0 23 23" fill="currentColor"><path d="M21.41 12.71c-.08-.01-.15 0-.22 0h-.03c-.03 0-.05 0-.08.01-.07 0-.13.01-.19.04-.52.21-1.44.19-2.02-.22-.44-.31-.65-.83-.62-1.53a.758.758 0 0 0-.27-.61.73.73 0 0 0-.65-.14c-1.98.51-3.49.23-4.26-.78-.82-1.08-.73-2.89.24-4.49.14-.23.14-.52 0-.75a.756.756 0 0 0-.67-.36c-.64.03-1.11-.1-1.31-.35-.19-.26-.13-.71-.01-1.29.04-.18.06-.38.03-.59-.05-.4-.4-.7-.81-.66C5.1 1.54 1 6.04 1 11.48 1 17.28 5.75 22 11.6 22c5.02 0 9.39-3.54 10.39-8.42.08-.4-.18-.78-.58-.87Zm-9.81 7.82c-5.03 0-9.12-4.06-9.12-9.06 0-4.34 3.05-8 7.25-8.86-.08.7.05 1.33.42 1.81.24.32.66.67 1.38.84-.76 1.86-.65 3.78.36 5.11.61.81 2.03 2 4.95 1.51.18.96.71 1.54 1.18 1.87.62.43 1.38.62 2.1.62.05 0 .09 0 .13-.01-1.23 3.64-4.7 6.18-8.64 6.18ZM13 17c0 .55-.45 1-1 1s-1-.45-1-1 .45-1 1-1 1 .45 1 1Zm5.29-12.3a.99.99 0 0 1-.29-.71c0-.55.45-.99 1-.99a1 1 0 0 1 .71.3c.19.19.29.44.29.71 0 .55-.45.99-1 .99a1 1 0 0 1-.71-.3ZM9 13.5c0 .83-.67 1.5-1.5 1.5S6 14.33 6 13.5 6.67 12 7.5 12s1.5.67 1.5 1.5Zm3.25.81a.744.744 0 0 1-.06-1.05c.28-.32.75-.34 1.05-.06.31.28.33.75.05 1.06-.15.16-.35.25-.56.25-.18 0-.36-.06-.5-.19ZM8.68 7.26c.41.37.44 1 .07 1.41-.2.22-.47.33-.75.33a.96.96 0 0 1-.67-.26c-.41-.37-.44-1-.07-1.41.37-.42 1-.45 1.41-.08Zm11.48 1.88c.18-.19.52-.19.7 0 .05.04.09.1.11.16.03.06.04.12.04.19 0 .13-.05.26-.15.35-.09.1-.22.15-.35.15s-.26-.05-.35-.15a.355.355 0 0 1-.11-.16.433.433 0 0 1-.04-.19c0-.13.05-.26.15-.35Zm-4.93-1.86a.75.75 0 1 1 1.059-1.06.75.75 0 0 1-1.059 1.06Z"/></svg></button></div><script>(function(win) {
    if (!document.querySelector('.pcb')) {
        return;
    }

    var cbConfig = {
        behaviour: document.querySelector('.pcb').getAttribute('data-behaviour'),
        behaviourLink: document.querySelector('.pcb').getAttribute('data-behaviour-link'),
        revision: document.querySelector('.pcb').getAttribute('data-revision'),
        configTTL: parseInt(document.querySelector('.pcb').getAttribute('data-config-ttl'), 10),
        debugMode: document.querySelector('.pcb').getAttribute('data-debug-mode') === 'true',
        initialState: null,
        initialLsState: null,
        previouslyAccepted: []
    };

    var cbUI = {
        wrapper: document.querySelector('.pcb'),
        banner: {
            element: null,
            btnAccept: null,
            btnReject: null,
            btnConfigure: null
        },
        popup: {
            element: null,
            btnClose: null,
            btnSave: null,
            btnAccept: null,
            btnReject: null,
            checkboxes: null,
        },
        overlay: null,
        badge: null,
        blockedScripts: document.querySelectorAll('script[type^="gdpr-blocker/"]'),
        triggerLinks: cbConfig.behaviourLink ? document.querySelectorAll('a[href*="' + cbConfig.behaviourLink + '"]') : null
    };

    function initUI () {
        // setup banner elements
        cbUI.banner.element = cbUI.wrapper.querySelector('.pcb__banner');
        cbUI.banner.btnAccept = cbUI.banner.element.querySelector('.pcb__btn--accept');
        cbUI.banner.btnReject = cbUI.banner.element.querySelector('.pcb__btn--reject');
        cbUI.banner.btnConfigure = cbUI.banner.element.querySelector('.pcb__btn--configure');

        // setup popup elements
        if (cbUI.wrapper.querySelector('.pcb__popup')) {
            cbUI.popup.element = cbUI.wrapper.querySelector('.pcb__popup');
            cbUI.popup.btnClose = cbUI.wrapper.querySelector('.pcb__popup__close');
            cbUI.popup.btnSave = cbUI.popup.element.querySelector('.pcb__btn--save');
            cbUI.popup.btnAccept = cbUI.popup.element.querySelector('.pcb__btn--accept');
            cbUI.popup.btnReject = cbUI.popup.element.querySelector('.pcb__btn--reject');
            cbUI.popup.checkboxes = cbUI.popup.element.querySelector('input[type="checkbox"]');
            // setup overlay
            cbUI.overlay = cbUI.wrapper.querySelector('.pcb__overlay');
        }

        cbUI.badge = cbUI.wrapper.querySelector('.pcb__badge');

        if (cbConfig.behaviour.indexOf('link') > -1) {
            for (var i = 0; i < cbUI.triggerLinks.length; i++) {
                cbUI.triggerLinks[i].addEventListener('click', function(e) {
                    e.preventDefault();
                    showBannerOrPopup();
                });
            }
        }
    }

    function initState () {
        var lsKeyName = getConfigName();
        var currentConfig = localStorage.getItem(lsKeyName);
        var configIsFresh = checkIfConfigIsFresh();

        if (!configIsFresh || currentConfig === null) {
            if (cbConfig.debugMode) {
                console.log('🍪 Config not found, or configuration expired');
            }

            if (window.publiiCBGCM) {
                gtag('consent', 'default', {
                    'ad_storage': window.publiiCBGCM.defaultState.ad_storage ? 'granted' : 'denied',
                    'ad_personalization': window.publiiCBGCM.defaultState.ad_personalization ? 'granted' : 'denied',
                    'ad_user_data': window.publiiCBGCM.defaultState.ad_user_data ? 'granted' : 'denied',
                    'analytics_storage': window.publiiCBGCM.defaultState.analytics_storage ? 'granted' : 'denied',
                    'personalization_storage': window.publiiCBGCM.defaultState.personalization_storage ? 'granted' : 'denied',
                    'functionality_storage': window.publiiCBGCM.defaultState.functionality_storage ? 'granted' : 'denied',
                    'security_storage': window.publiiCBGCM.defaultState.security_storage ? 'granted' : 'denied'
                });  
                
                if (cbConfig.debugMode) {
                    console.log('🍪 GCMv2 DEFAULT STATE: ' + JSON.stringify({
                        'ad_storage': window.publiiCBGCM.defaultState.ad_storage ? 'granted' : 'denied',
                        'ad_personalization': window.publiiCBGCM.defaultState.ad_personalization ? 'granted' : 'denied',
                        'ad_user_data': window.publiiCBGCM.defaultState.ad_user_data ? 'granted' : 'denied',
                        'analytics_storage': window.publiiCBGCM.defaultState.analytics_storage ? 'granted' : 'denied',
                        'personalization_storage': window.publiiCBGCM.defaultState.personalization_storage ? 'granted' : 'denied',
                        'functionality_storage': window.publiiCBGCM.defaultState.functionality_storage ? 'granted' : 'denied',
                        'security_storage': window.publiiCBGCM.defaultState.security_storage ? 'granted' : 'denied'
                    }));
                }
            }

            showBanner();
        } else if (typeof currentConfig === 'string') {
            if (cbConfig.debugMode) {
                console.log('🍪 Config founded');
            }

            cbConfig.initialLsState = currentConfig.split(',');

            if (window.publiiCBGCM) {
                gtag('consent', 'default', {
                    'ad_storage': getDefaultConsentState(currentConfig, 'ad_storage'),
                    'ad_personalization': getDefaultConsentState(currentConfig, 'ad_personalization'),
                    'ad_user_data': getDefaultConsentState(currentConfig, 'ad_user_data'),
                    'analytics_storage': getDefaultConsentState(currentConfig, 'analytics_storage'),
                    'personalization_storage': getDefaultConsentState(currentConfig, 'personalization_storage'),
                    'functionality_storage': getDefaultConsentState(currentConfig, 'functionality_storage'),
                    'security_storage': getDefaultConsentState(currentConfig, 'security_storage')
                });
                
                if (cbConfig.debugMode) {
                    console.log('🍪 GCMv2 DEFAULT STATE: ' + JSON.stringify({
                        'ad_storage': getDefaultConsentState(currentConfig, 'ad_storage'),
                        'ad_personalization': getDefaultConsentState(currentConfig, 'ad_personalization'),
                        'ad_user_data': getDefaultConsentState(currentConfig, 'ad_user_data'),
                        'analytics_storage': getDefaultConsentState(currentConfig, 'analytics_storage'),
                        'personalization_storage': getDefaultConsentState(currentConfig, 'personalization_storage'),
                        'functionality_storage': getDefaultConsentState(currentConfig, 'functionality_storage'),
                        'security_storage': getDefaultConsentState(currentConfig, 'security_storage')
                    }));
                }
            }

            showBadge();

            if (cbUI.popup.element) {
                var allowedGroups = currentConfig.split(',');
                var checkedCheckboxes = cbUI.popup.element.querySelectorAll('input[type="checkbox"]:checked');

                for (var j = 0; j < checkedCheckboxes.length; j++) {
                    var name = checkedCheckboxes[j].getAttribute('data-group-name');

                    if (name && name !== '-' && allowedGroups.indexOf(name) === -1) {
                        checkedCheckboxes[j].checked = false;
                    }
                }

                for (var i = 0; i < allowedGroups.length; i++) {
                    var checkbox = cbUI.popup.element.querySelector('input[type="checkbox"][data-group-name="' + allowedGroups[i] + '"]');

                    if (checkbox) {
                        checkbox.checked = true;
                    }

                    allowCookieGroup(allowedGroups[i]);
                }
            }
        }

        setTimeout(function () {
            cbConfig.initialState = getInitialStateOfConsents();
        }, 0);
    }

    function checkIfConfigIsFresh () {
        var lastConfigSave = localStorage.getItem('publii-gdpr-cookies-config-save-date');

        if (lastConfigSave === null) {
            return false;
        }

        lastConfigSave = parseInt(lastConfigSave, 10);

        if (lastConfigSave === 0) {
            return true;
        }

        if (+new Date() - lastConfigSave < cbConfig.configTTL * 24 * 60 * 60 * 1000) {
            return true;
        }

        return false;
    }

    function getDefaultConsentState (currentConfig, consentGroup) {
        let configGroups = currentConfig.split(',');

        for (let i = 0; i < configGroups.length; i++) {
            let groupName = configGroups[i];
            let group = window.publiiCBGCM.groups.find(group => group.cookieGroup === groupName);

            if (group && group[consentGroup]) {
                return 'granted';
            }
        }  
        
        if (window.publiiCBGCM.defaultState[consentGroup]) {
            return 'granted'; 
        }
        
        return 'denied';
    }

    function initBannerEvents () {
        cbUI.banner.btnAccept.addEventListener('click', function (e) {
            e.preventDefault();
            acceptAllCookies('banner');
            showBadge();
        }, false);

        if (cbUI.banner.btnReject) {
            cbUI.banner.btnReject.addEventListener('click', function (e) {
                e.preventDefault();
                rejectAllCookies();
                showBadge();
            }, false);
        }

        if (cbUI.banner.btnConfigure) {
            cbUI.banner.btnConfigure.addEventListener('click', function (e) {
                e.preventDefault();
                hideBanner();
                showAdvancedPopup();
                showBadge();
            }, false);
        }
    }

    function initPopupEvents () {
        if (!cbUI.popup.element) {
            return;
        }

        cbUI.overlay.addEventListener('click', function (e) {
            hideAdvancedPopup();
        }, false);

        cbUI.popup.element.addEventListener('click', function (e) {
            e.stopPropagation();
        }, false);

        cbUI.popup.btnAccept.addEventListener('click', function (e) {
            e.preventDefault();
            acceptAllCookies('popup');
        }, false);

        cbUI.popup.btnReject.addEventListener('click', function (e) {
            e.preventDefault();
            rejectAllCookies();
        }, false);

        cbUI.popup.btnSave.addEventListener('click', function (e) {
            e.preventDefault();
            saveConfiguration();
        }, false);

        cbUI.popup.btnClose.addEventListener('click', function (e) {
            e.preventDefault();
            hideAdvancedPopup();
        }, false);
    }

    function initBadgeEvents () {
        if (!cbUI.badge) {
            return;
        }

        cbUI.badge.addEventListener('click', function (e) {
            showBannerOrPopup();
        }, false);
    }

    initUI();
    initState();
    initBannerEvents();
    initPopupEvents();
    initBadgeEvents();

    /**
     * API
     */
    function addScript (src, inline) {
        var newScript = document.createElement('script');

        if (src) {
            newScript.setAttribute('src', src);
        }

        if (inline) {
            newScript.text = inline;
        }

        document.body.appendChild(newScript);
    }

    function allowCookieGroup (allowedGroup) {
        var scripts = document.querySelectorAll('script[type="gdpr-blocker/' + allowedGroup + '"]');
        cbConfig.previouslyAccepted.push(allowedGroup);
    
        for (var j = 0; j < scripts.length; j++) {
            addScript(scripts[j].src, scripts[j].text);
        }

        var groupEvent = new Event('publii-cookie-banner-unblock-' + allowedGroup);
        document.body.dispatchEvent(groupEvent);
        unlockEmbeds(allowedGroup);

        if (cbConfig.debugMode) {
            console.log('🍪 Allowed group: ' + allowedGroup);
        }

        if (window.publiiCBGCM && (!cbConfig.initialLsState || cbConfig.initialLsState.indexOf(allowedGroup) === -1)) {
            let consentResult = {};
            let group = window.publiiCBGCM.groups.find(group => group.cookieGroup === allowedGroup);

            if (group) {
                let foundSomeConsents = false;

                Object.keys(group).forEach(key => {
                    if (key !== 'cookieGroup' && group[key] === true) {
                        consentResult[key] = 'granted';
                        foundSomeConsents = true;
                    }
                });

                if (foundSomeConsents) {
                    gtag('consent', 'update', consentResult);   

                    if (cbConfig.debugMode) {
                        console.log('🍪 GCMv2 UPDATE: ' + JSON.stringify(consentResult));
                    }
                }
            }
        }
    }

    function showBannerOrPopup () {
        if (cbUI.popup.element) {
            showAdvancedPopup();
        } else {
            showBanner();
        }
    }

    function showAdvancedPopup () {
        cbUI.popup.element.classList.add('is-visible');
        cbUI.overlay.classList.add('is-visible');
        cbUI.popup.element.setAttribute('aria-hidden', 'false');
        cbUI.overlay.setAttribute('aria-hidden', 'false');
    }

    function hideAdvancedPopup () {
        cbUI.popup.element.classList.remove('is-visible');
        cbUI.overlay.classList.remove('is-visible');
        cbUI.popup.element.setAttribute('aria-hidden', 'true');
        cbUI.overlay.setAttribute('aria-hidden', 'true');
    }

    function showBanner () {
        cbUI.banner.element.classList.add('is-visible');
        cbUI.banner.element.setAttribute('aria-hidden', 'false');
    }

    function hideBanner () {
        cbUI.banner.element.classList.remove('is-visible');
        cbUI.banner.element.setAttribute('aria-hidden', 'true');
    }

    function showBadge () {
        if (!cbUI.badge) {
            return;
        }

        cbUI.badge.classList.add('is-visible');
        cbUI.badge.setAttribute('aria-hidden', 'false');
    }

    function getConfigName () {
        var lsKeyName = 'publii-gdpr-allowed-cookies';

        if (cbConfig.revision) {
            lsKeyName = lsKeyName + '-v' + parseInt(cbConfig.revision, 10);
        }

        return lsKeyName;
    }

    function storeConfiguration (allowedGroups) {
        var lsKeyName = getConfigName();
        var dataToStore = allowedGroups.join(',');
        localStorage.setItem(lsKeyName, dataToStore);

        if (cbConfig.configTTL === 0) {
            localStorage.setItem('publii-gdpr-cookies-config-save-date', 0);

            if (cbConfig.debugMode) {
                console.log('🍪 Store never expiring configuration');
            }
        } else {
            localStorage.setItem('publii-gdpr-cookies-config-save-date', +new Date());
        }
    }

    function getInitialStateOfConsents () {
        if (!cbUI.popup.element) {
            return [];
        }

        var checkedGroups = cbUI.popup.element.querySelectorAll('input[type="checkbox"]:checked');
        var groups = [];

        for (var i = 0; i < checkedGroups.length; i++) {
            var allowedGroup = checkedGroups[i].getAttribute('data-group-name');

            if (allowedGroup !== '') {
                groups.push(allowedGroup);
            }
        }

        if (cbConfig.debugMode) {
            console.log('🍪 Initial state: ' + groups.join(', '));
        }

        return groups;
    }

    function getCurrentStateOfConsents () {
        if (!cbUI.popup.element) {
            return [];
        }

        var checkedGroups = cbUI.popup.element.querySelectorAll('input[type="checkbox"]:checked');
        var groups = [];

        for (var i = 0; i < checkedGroups.length; i++) {
            var allowedGroup = checkedGroups[i].getAttribute('data-group-name');

            if (allowedGroup !== '') {
                groups.push(allowedGroup);
            }
        }

        if (cbConfig.debugMode) {
            console.log('🍪 State to save: ' + groups.join(', '));
        }

        return groups;
    }

    function getAllGroups () {
        if (!cbUI.popup.element) {
            return [];
        }

        var checkedGroups = cbUI.popup.element.querySelectorAll('input[type="checkbox"]');
        var groups = [];

        for (var i = 0; i < checkedGroups.length; i++) {
            var allowedGroup = checkedGroups[i].getAttribute('data-group-name');

            if (allowedGroup !== '') {
                groups.push(allowedGroup);
            }
        }

        return groups;
    }

    function acceptAllCookies (source) {
        var groupsToAccept = getAllGroups();
        storeConfiguration(groupsToAccept);

        for (var i = 0; i < groupsToAccept.length; i++) {
            var group = groupsToAccept[i];

            if (cbConfig.initialState.indexOf(group) > -1 || cbConfig.previouslyAccepted.indexOf(group) > -1) {
                if (cbConfig.debugMode) {
                    console.log('🍪 Skip previously activated group: ' + group);
                }

                continue;
            }

            allowCookieGroup(group);
        }

        if (cbUI.popup.element) {
            var checkboxesToCheck = cbUI.popup.element.querySelectorAll('input[type="checkbox"]');

            for (var j = 0; j < checkboxesToCheck.length; j++) {
                checkboxesToCheck[j].checked = true;
            }
        }

        if (cbConfig.debugMode) {
            console.log('🍪 Accept all cookies: ', groupsToAccept.join(', '));
        }

        if (source === 'popup') {
            hideAdvancedPopup();
        } else if (source === 'banner') {
            hideBanner();
        }
    }

    function rejectAllCookies () {
        if (cbConfig.debugMode) {
            console.log('🍪 Reject all cookies');
        }

        storeConfiguration([]);
        setTimeout(function () {
            window.location.reload();
        }, 100);
    }

    function saveConfiguration () {
        var groupsToAccept = getCurrentStateOfConsents();
        storeConfiguration(groupsToAccept);

        if (cbConfig.debugMode) {
            console.log('🍪 Save new config: ', groupsToAccept.join(', '));
        }

        if (reloadIsNeeded(groupsToAccept)) {
            setTimeout(function () {
                window.location.reload();
            }, 100);
            return;
        }

        for (var i = 0; i < groupsToAccept.length; i++) {
            var group = groupsToAccept[i];

            if (cbConfig.initialState.indexOf(group) > -1 || cbConfig.previouslyAccepted.indexOf(group) > -1) {
                if (cbConfig.debugMode) {
                    console.log('🍪 Skip previously activated group: ' + group);
                }

                continue;
            }

            allowCookieGroup(group);
        }

        hideAdvancedPopup();
    }

    function reloadIsNeeded (groupsToAccept) {
        // check if user rejected consent for initial groups
        var initialGroups = cbConfig.initialState;
        var previouslyAcceptedGroups = cbConfig.previouslyAccepted;
        var groupsToCheck = initialGroups.concat(previouslyAcceptedGroups);

        for (var i = 0; i < groupsToCheck.length; i++) {
            var groupToCheck = groupsToCheck[i];

            if (groupToCheck !== '' && groupsToAccept.indexOf(groupToCheck) === -1) {
                if (cbConfig.debugMode) {
                    console.log('🍪 Reload is needed due lack of: ', groupToCheck);
                }

                return true;
            }
        }

        return false;
    }

    function unlockEmbeds (cookieGroup) {
        var iframesToUnlock = document.querySelectorAll('.pec-wrapper[data-consent-group-id="' + cookieGroup + '"]');

        for (var i = 0; i < iframesToUnlock.length; i++) {
            var iframeWrapper = iframesToUnlock[i];
            iframeWrapper.querySelector('.pec-overlay').classList.remove('is-active');
            iframeWrapper.querySelector('.pec-overlay').setAttribute('aria-hidden', 'true');
            var iframe = iframeWrapper.querySelector('iframe');
            iframe.setAttribute('src', iframe.getAttribute('data-consent-src'));
        }
    }

    win.publiiEmbedConsentGiven = function (cookieGroup) {
        // it will unlock embeds
        allowCookieGroup(cookieGroup);

        var checkbox = cbUI.popup.element.querySelector('input[type="checkbox"][data-group-name="' + cookieGroup + '"]');

        if (checkbox) {
            checkbox.checked = true;
        }

        var groupsToAccept = getCurrentStateOfConsents();
        storeConfiguration(groupsToAccept);

        if (cbConfig.debugMode) {
            console.log('🍪 Save new config: ', groupsToAccept.join(', '));
        }
    }
})(window);</script></body></html>