<!DOCTYPE html><html lang="en-gb"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>How Does Changing Seasons Impact Human Mental Health? Insights &amp; Tips</title><meta name="description" content="Discover how changing seasons impact human mental health with science-backed insights and practical tips to manage mood swings year-round."><meta name="generator" content="Publii Open-Source CMS for Static Site"><script type="text/javascript" async src="https://www.googletagmanager.com/gtag/js?id=G-B538RQ55JN"></script><script type="text/javascript">window.dataLayer = window.dataLayer || [];
				  function gtag(){dataLayer.push(arguments);}
				  gtag('js', new Date());
				  gtag('config', 'G-B538RQ55JN' );</script><link rel="canonical" href="https://ankit-karki.com.np/blogs/changing-seasons-impact-mental-health/"><link rel="alternate" type="application/atom+xml" href="https://ankit-karki.com.np/blogs/feed.xml" title="VITALITY BLOGS - RSS"><link rel="alternate" type="application/json" href="https://ankit-karki.com.np/blogs/feed.json" title="VITALITY BLOGS - JSON"><meta property="og:title" content="How Does Changing Seasons Impact Human Mental Health? Insights & Tips"><meta property="og:image" content="https://ankit-karki.com.np/blogs/media/posts/49/How-Does-Changing-Seasons-Impact-Human-Mental-Health-Insights-and-Tips.png"><meta property="og:image:width" content="960"><meta property="og:image:height" content="640"><meta property="og:site_name" content="VITALITY BLOGS"><meta property="og:description" content="Discover how changing seasons impact human mental health with science-backed insights and practical tips to manage mood swings year-round."><meta property="og:url" content="https://ankit-karki.com.np/blogs/changing-seasons-impact-mental-health/"><meta property="og:type" content="article"><link rel="preload" href="https://ankit-karki.com.np/blogs/assets/dynamic/fonts/publicsans/publicsans.woff2" as="font" type="font/woff2" crossorigin><link rel="preload" href="https://ankit-karki.com.np/blogs/assets/dynamic/fonts/publicsans/publicsans-italic.woff2" as="font" type="font/woff2" crossorigin><link rel="stylesheet" href="https://ankit-karki.com.np/blogs/assets/css/style.css?v=dffe78a877f0b011cadc387776dbe834"><script type="application/ld+json">{"@context":"http://schema.org","@type":"Article","mainEntityOfPage":{"@type":"WebPage","@id":"https://ankit-karki.com.np/blogs/changing-seasons-impact-mental-health/"},"headline":"How Does Changing Seasons Impact Human Mental Health? Insights & Tips","datePublished":"2025-06-07T14:18-05:00","dateModified":"2025-06-07T15:40-05:00","image":{"@type":"ImageObject","url":"https://ankit-karki.com.np/blogs/media/posts/49/How-Does-Changing-Seasons-Impact-Human-Mental-Health-Insights-and-Tips.png","height":640,"width":960},"description":"Discover how changing seasons impact human mental health with science-backed insights and practical tips to manage mood swings year-round.","author":{"@type":"Person","name":"Leon","url":"https://ankit-karki.com.np/blogs/authors/leon-staff-team/"},"publisher":{"@type":"Organization","name":"Leon"}}</script><noscript><style>img[loading] {
                    opacity: 1;
                }</style></noscript></head><body class="post-template"><div class="container"><header class="header" id="js-header"><a href="https://ankit-karki.com.np/blogs/" class="logo">VITALITY BLOGS</a><nav class="navbar js-navbar"><button class="navbar__toggle js-toggle" aria-label="Menu"><span class="navbar__toggle-box"><span class="navbar__toggle-inner">Menu</span></span></button><ul class="navbar__menu"><li><a href="https://ankit-karki.com.np" target="_self">HOME</a></li><li><a href="https://ankit-karki.com.np/#contact" target="_self">CONTACT</a></li><li><a href="https://ankit-karki.com.np/privacy-policy" target="_self">PRIVACY</a></li><li><a href="https://ankit-karki.com.np/terms" target="_self">TERMS</a></li></ul></nav><div class="search"><a href="/blogs/search" class="search__btn" aria-label="Search"><svg role="presentation" focusable="false" height="15" width="15"><use xlink:href="https://ankit-karki.com.np/blogs/assets/svg/svg-map.svg#search"/></svg></a></div></header><main class="post"><article class="content wrapper"><header class="hero"><p class="content__meta">Published on <time datetime="2025-06-07T14:18">June 7, 2025</time></p><h1 class="content__title">How Does Changing Seasons Impact Human Mental Health? Insights &amp; Tips</h1></header><figure class="content__featured-image post__image--normal"><img src="https://ankit-karki.com.np/blogs/media/posts/49/How-Does-Changing-Seasons-Impact-Human-Mental-Health-Insights-and-Tips.png" srcset="https://ankit-karki.com.np/blogs/media/posts/49/responsive/How-Does-Changing-Seasons-Impact-Human-Mental-Health-Insights-and-Tips-xs.webp 300w, https://ankit-karki.com.np/blogs/media/posts/49/responsive/How-Does-Changing-Seasons-Impact-Human-Mental-Health-Insights-and-Tips-sm.webp 480w, https://ankit-karki.com.np/blogs/media/posts/49/responsive/How-Does-Changing-Seasons-Impact-Human-Mental-Health-Insights-and-Tips-md.webp 768w, https://ankit-karki.com.np/blogs/media/posts/49/responsive/How-Does-Changing-Seasons-Impact-Human-Mental-Health-Insights-and-Tips-lg.webp 1024w, https://ankit-karki.com.np/blogs/media/posts/49/responsive/How-Does-Changing-Seasons-Impact-Human-Mental-Health-Insights-and-Tips-xl.webp 1360w, https://ankit-karki.com.np/blogs/media/posts/49/responsive/How-Does-Changing-Seasons-Impact-Human-Mental-Health-Insights-and-Tips-2xl.webp 1600w, https://ankit-karki.com.np/blogs/media/posts/49/responsive/How-Does-Changing-Seasons-Impact-Human-Mental-Health-Insights-and-Tips-sm2.webp 375w" sizes="(max-width: 1600px) 100vw, 1600px" loading="eager" height="640" width="960" alt=""></figure><div class="content__entry"><p>If you‚Äôve ever noticed how your mood shifts as the months roll by‚Äîmaybe a slump in the grey winter or an inexplicable restlessness in spring‚Äîyou‚Äôre not alone. The changing seasons have a surprisingly complex influence on our mental well-being, touching everything from our daily habits to the chemistry inside our brains. But how exactly does this all work? And why do some people sail through the year while others seem to get tangled in seasonal emotional storms?</p><p>Let‚Äôs unpack this together. We‚Äôll look at the science, personal patterns, and practical insights around how changing seasons impact human mental health‚Äîwithout pretending there‚Äôs a one-size-fits-all answer. Because, honestly, the way seasons mess (or bless) with our minds feels pretty personal, a bit mysterious, and yes, sometimes even contradictory.</p><h2>What‚Äôs Going On? Seasonal Shifts and Your Mind</h2><p>At first glance, it might seem obvious: less daylight in winter means you feel down; longer days in summer lift your mood. But it‚Äôs not just about the sun clocking fewer hours outside. The interplay of light, temperature, lifestyle changes, and biology creates a subtle dance that can sway emotions.</p><p>One of the most well-known phenomena is Seasonal Affective Disorder (SAD), a form of depression triggered by seasonal changes, usually kicking in during late fall and winter. But here‚Äôs a curveball: not everyone‚Äôs down in winter. Some folks feel anxious or depressed when spring or summer rolls around. So, seasonal mood changes are varied and don‚Äôt always follow the calendar you expect.</p><h2>Why Do Seasons Affect Mental Health? The Brain‚Äôs Seasonal Sensitivity</h2><h3>Light and the Internal Clock</h3><p>Our bodies run on circadian rhythms, internal 24-hour clocks heavily influenced by sunlight. When daylight shrinks, as it does in autumn and winter, the brain produces more melatonin‚Äîthe hormone that makes you feel sleepy. If melatonin sticks around too long or rises too early, it can leave you feeling sluggish or ‚Äúoff.‚Äù At the same time, serotonin, the brain chemical linked to happiness and calm, tends to dip when light is scarce. This double-whammy can set the stage for low mood.</p><h3>Temperature: More Than Just Hot or Cold</h3><p>Temperature‚Äôs role is less straightforward but no less important. Mild cool weather can actually boost well-being by encouraging physical activity and social interaction. On the flip side, extreme cold or heat stresses the body, disrupts sleep, and can trigger irritability or anxiety. There‚Äôs growing evidence that heatwaves correlate with increased mental health crises, including higher rates of emergency calls related to mood disorders and even spikes in suicide rates.</p><h3>Changes in Routine and Behavior</h3><p>With seasons come lifestyle shifts‚Äîlonger indoor hours in winter, more outdoor activity in summer, different eating patterns, and altered social rhythms. These changes influence mental health as much as the biological factors. For instance, reduced physical activity during cold months can worsen mood symptoms, while disruptions in sleep caused by heat or changing daylight hours might compound stress.</p><h2>Who‚Äôs Affected, and When?</h2><p>It might surprise you to learn there‚Äôs no single seasonal pattern everyone follows. Research tracking mood changes across the year reveals at least four distinct patterns:</p><table><thead><tr><th>Seasonal Mood Pattern</th><th>When Depression Peaks</th><th>When Mood is Best</th></tr></thead><tbody><tr><td>Stable Mood</td><td>No significant change</td><td>Consistent</td></tr><tr><td>Winter Peak</td><td>Winter (Dec‚ÄìFeb)</td><td>Summer (Jun‚ÄìAug)</td></tr><tr><td>Spring Peak</td><td>Spring (Mar‚ÄìMay)</td><td>Autumn (Sep‚ÄìNov)</td></tr><tr><td>Autumn Peak</td><td>Autumn (Sep‚ÄìNov)</td><td>Winter (Dec‚ÄìFeb)</td></tr></tbody></table><p>About half of people don‚Äôt experience noticeable seasonal mood swings, but among those who do, the timing can vary quite a bit. The classic winter slump (winter peak) is just one piece of the puzzle.</p><h2>How Do These Seasonal Effects Play Out?</h2><h3>The Winter Low: More Than Just Feeling Blue</h3><p>Most people associate winter with low energy and a heavier mood. That‚Äôs often linked to less sunlight, which alters melatonin and serotonin levels. For some, this manifests as fatigue, trouble concentrating, oversleeping, and a craving for carbohydrate-rich foods. It‚Äôs like your brain is craving fuel and comfort to battle the darker days.</p><p>But not everyone fits this mold. Some feel restless or anxious instead, or notice that the shorter days make socializing tougher, which deepens isolation.</p><h3>Spring and Summer: A Mixed Bag</h3><p>Spring brings longer days and often a burst of energy and optimism. However, this shift can also unsettle some people. The faster-changing daylight and temperature might disrupt sleep, leading to irritability or anxiety. For a minority, depression peaks in warmer months, accompanied by insomnia or appetite loss.</p><p>Summer‚Äôs heat, especially during extreme heat waves, can worsen mental health in multiple ways‚Äîfrom poor sleep to increased aggression and stress. It‚Äôs a time when the body‚Äôs coping mechanisms are pushed to their limits.</p><h2>What About Temperature Extremes?</h2><p>One intriguing finding from recent studies is that moderate cool temperatures (around 0‚Äì20 ¬∞C or 32‚Äì68 ¬∞F) often correlate with better mood and lower stress levels. That‚Äôs probably why early autumn or late spring can feel like a mental health sweet spot for many.</p><p>But when temperatures drop below freezing or climb above 25 ¬∞C (77 ¬∞F), helpline calls and mental health emergencies rise by 3‚Äì5%. Sleep disturbances caused by heat waves are particularly impactful for vulnerable groups, including the elderly and women.</p><h2>Can You Predict Your Seasonal Mental Health?</h2><p>Possibly. Wearable devices have shed new light here. Studies show that people with higher depression scores tend to take fewer steps and have irregular activity rhythms during spring and summer‚Äîsometimes later sleep onset too. So, mood and behavior changes can ripple together, creating recognizable patterns.</p><p>However, the relationship isn‚Äôt always straightforward‚Äîsome people feel more active when their mood dips and vice versa. It‚Äôs a tangled web, not a simple cause-effect.</p><h2>What Can You Do? Practical Tips to Weather Seasonal Changes</h2><p>If you suspect the seasons are messing with your head, here are some approaches that tend to help:</p><h3>1. Light Therapy</h3><p>Getting bright light in the morning‚Äîabout 10,000 lux for 20‚Äì30 minutes‚Äîcan reset your circadian rhythm and boost serotonin. Many people find relief from winter mood dips this way, and it‚Äôs safe for most.</p><h3>2. Maintain Routine</h3><p>Keeping consistent sleep and wake times, scheduling social activities, and structuring your day helps anchor your internal clock. This is especially crucial during months with fluctuating daylight.</p><h3>3. Move Your Body</h3><p>Exercise has a powerful mood-boosting effect. Even short daily walks outside can counteract some of the winter blues and improve sleep quality.</p><h3>4. Mind Your Environment</h3><p>If possible, keep your living space well-lit and ventilated. Indoor plants or a sunny windowsill spot for morning coffee can make a subtle difference.</p><h3>5. Manage Stress and Anxiety</h3><p>Practices like mindfulness, journaling, or therapy can help process feelings stirred up by seasonal changes, including worries about climate or shifting routines.</p><h2>A Quick Comparison Table of Seasonal Impacts and Solutions</h2><table><thead><tr><th>Season</th><th>Common Mental Health Challenges</th><th>Helpful Interventions</th></tr></thead><tbody><tr><td>Winter</td><td>Fatigue, low mood, oversleeping</td><td>Light therapy, exercise, structured routine</td></tr><tr><td>Spring</td><td>Anxiety, sleep disruption, mood swings</td><td>Sleep hygiene, outdoor activity, mindfulness</td></tr><tr><td>Summer</td><td>Heat-related stress, insomnia, irritability</td><td>Cooling strategies, hydration, relaxation techniques</td></tr><tr><td>Autumn</td><td>Mood dips, lower energy</td><td>Early light exposure, social engagement, healthy diet</td></tr></tbody></table><h2>A Personal Note (Because Why Not?)</h2><p>I have to admit, I always feel a little ‚Äúoff‚Äù in late autumn‚Äîkind of stuck between holding onto summer‚Äôs energy and facing the encroaching dark days. It‚Äôs like my brain can‚Äôt decide whether to feel hopeful or cautious. Funny how nature‚Äôs rhythms can sync up with our own internal tug-of-war.</p><p>It‚Äôs also interesting how sometimes small things help more than grand plans. A brisk walk on a cool but sunny day or chatting with a friend can punch a hole in the seasonal gloom. The mind, it seems, thrives on simple rhythms as much as complex science.</p><h2>Frequently Asked Questions (FAQ)</h2><p><strong>1. Why do shorter days make people feel depressed?</strong><br>Shorter daylight means more melatonin and less serotonin, hormones that regulate sleep and mood. This imbalance can cause fatigue and low mood.</p><p><strong>2. Can seasonal mental health changes happen outside winter?</strong><br>Absolutely. Some experience mood dips or anxiety in spring, summer, or autumn, influenced by temperature, sleep disruption, and lifestyle shifts.</p><p><strong>3. Is light therapy effective?</strong><br>Yes, for many people, morning bright light therapy significantly improves seasonal mood symptoms by resetting internal clocks.</p><p><strong>4. How does temperature affect mental health?</strong><br>Extreme cold or heat disrupts sleep and daily rhythms, which can increase stress, irritability, and mental health crises.</p><p><strong>5. Are there ways to prevent seasonal mood swings?</strong><br>Maintaining a consistent routine, getting daily light exposure, staying physically active, and managing stress can all help buffer seasonal mood shifts.</p></div><footer class="content__footer"><div class="content__last-updated">This article was updated on June 7, 2025</div><div class="content__footer__col"><ul class="content__tag"><li><a href="https://ankit-karki.com.np/blogs/tags/mental-health/">Mental Health</a></li></ul><div class="content__share"></div></div><nav class="content__nav"><div class="content__nav__prev">Previous Post<h5><a href="https://ankit-karki.com.np/blogs/raw-vegan-meals-recipes-healthy-ideas/" class="invert" rel="prev">Discover 10 Delicious Raw Vegan Meals to Energize Your Day</a></h5></div><div class="content__nav__next">Next Post<h5><a href="https://ankit-karki.com.np/blogs/guided-meditation-script-guide/" class="invert" rel="next">Guided Meditation Script: Crafting Calm, Clarity, and Connection</a></h5></div></nav></footer></article></main><footer class="footer"><div class="footer__nav"><ul class="navbar__menu"><li><a href="https://ankit-karki.com.np" target="_self">HOME</a></li><li><a href="https://ankit-karki.com.np/#contact" target="_self">CONTACT</a></li><li><a href="https://ankit-karki.com.np/privacy-policy" target="_self">PRIVACY</a></li><li><a href="https://ankit-karki.com.np/terms" target="_self">TERMS</a></li></ul></div><div class="footer__copyright">¬© 2025 Vitality Blogs. All rights reserved.</div></footer></div><script defer="defer" src="https://ankit-karki.com.np/blogs/assets/js/scripts.min.js?v=4268bfae06e330d473c424d50f09abda"></script><script>window.publiiThemeMenuConfig={mobileMenuMode:'sidebar',animationSpeed:300,submenuWidth: 'auto',doubleClickTime:500,mobileMenuExpandableSubmenus:true,relatedContainerForOverlayMenuSelector:'.navbar'};</script><script>/*<![CDATA[*/var images=document.querySelectorAll("img[loading]");for(var i=0;i<images.length;i++){if(images[i].complete){images[i].classList.add("is-loaded")}else{images[i].addEventListener("load",function(){this.classList.add("is-loaded")},false)}};/*]]>*/</script><div class="pcb" data-behaviour="badge" data-behaviour-link="#cookie-settings" data-revision="1" data-config-ttl="90" data-debug-mode="false"><div role="dialog" aria-modal="true" aria-hidden="true" aria-labelledby="pcb-title" aria-describedby="pcb-txt" class="pcb__banner"><div class="pcb__inner"><div id="pcb-title" role="heading" aria-level="2" class="pcb__title">This website uses cookies</div><div id="pcb-txt" class="pcb__txt">Select which cookies to opt-in to via the checkboxes below; our website uses cookies to examine site traffic and user activity while on our site, for marketing, and to provide social media functionality. <a href="https://leonstaff.com/privacy-policy.html">More details...</a></div><div class="pcb__buttons"><button type="button" class="pcb__btn pcb__btn--link pcb__btn--configure" aria-haspopup="dialog">Manage preferences</button> <button type="button" class="pcb__btn pcb__btn--solid pcb__btn--accept">Accept all</button></div></div></div><div class="pcb__popup" role="dialog" aria-modal="true" aria-hidden="true" aria-labelledby="pcb-popup-title"><div class="pcb__popup__wrapper"><div class="pcb__inner pcb__popup__inner"><div class="pcb__popup__heading"><div id="pcb-popup-title" role="heading" aria-level="2" class="pcb__title">Cookie settings</div><button class="pcb__popup__close" aria-label="Close"></button></div><div class="pcb__popup__content"><div class="pcb__txt pcb__popup__txt">We use cookies to enhance your browsing experience, serve personalized ads or content, and analyze our traffic. By clicking "Accept All", you consent to our use of cookies. <a href="https://leonstaff.com/privacy-policy.html">More details...</a></div><ul class="pcb__groups"><li class="pcb__group"><details><summary class="pcb__group__title no-desc">Required</summary></details><div class="pcb__popup__switch is-checked"><input type="checkbox" data-group-name="" id="pcb-group-0" checked="checked"> <label for="pcb-group-0">Required</label></div></li></ul></div><div class="pcb__buttons pcb__popup__buttons"><button type="button" class="pcb__btn pcb__btn--solid pcb__btn--accept">Accept all</button> <button type="button" class="pcb__btn pcb__btn--reject">Reject all</button> <button type="button" class="pcb__btn pcb__btn--save">Save settings</button></div></div></div></div><div class="pcb__overlay" aria-hidden="true"></div><button class="pcb__badge" aria-label="Cookie Policy" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" width="40" height="40" viewBox="0 0 23 23" fill="currentColor"><path d="M21.41 12.71c-.08-.01-.15 0-.22 0h-.03c-.03 0-.05 0-.08.01-.07 0-.13.01-.19.04-.52.21-1.44.19-2.02-.22-.44-.31-.65-.83-.62-1.53a.758.758 0 0 0-.27-.61.73.73 0 0 0-.65-.14c-1.98.51-3.49.23-4.26-.78-.82-1.08-.73-2.89.24-4.49.14-.23.14-.52 0-.75a.756.756 0 0 0-.67-.36c-.64.03-1.11-.1-1.31-.35-.19-.26-.13-.71-.01-1.29.04-.18.06-.38.03-.59-.05-.4-.4-.7-.81-.66C5.1 1.54 1 6.04 1 11.48 1 17.28 5.75 22 11.6 22c5.02 0 9.39-3.54 10.39-8.42.08-.4-.18-.78-.58-.87Zm-9.81 7.82c-5.03 0-9.12-4.06-9.12-9.06 0-4.34 3.05-8 7.25-8.86-.08.7.05 1.33.42 1.81.24.32.66.67 1.38.84-.76 1.86-.65 3.78.36 5.11.61.81 2.03 2 4.95 1.51.18.96.71 1.54 1.18 1.87.62.43 1.38.62 2.1.62.05 0 .09 0 .13-.01-1.23 3.64-4.7 6.18-8.64 6.18ZM13 17c0 .55-.45 1-1 1s-1-.45-1-1 .45-1 1-1 1 .45 1 1Zm5.29-12.3a.99.99 0 0 1-.29-.71c0-.55.45-.99 1-.99a1 1 0 0 1 .71.3c.19.19.29.44.29.71 0 .55-.45.99-1 .99a1 1 0 0 1-.71-.3ZM9 13.5c0 .83-.67 1.5-1.5 1.5S6 14.33 6 13.5 6.67 12 7.5 12s1.5.67 1.5 1.5Zm3.25.81a.744.744 0 0 1-.06-1.05c.28-.32.75-.34 1.05-.06.31.28.33.75.05 1.06-.15.16-.35.25-.56.25-.18 0-.36-.06-.5-.19ZM8.68 7.26c.41.37.44 1 .07 1.41-.2.22-.47.33-.75.33a.96.96 0 0 1-.67-.26c-.41-.37-.44-1-.07-1.41.37-.42 1-.45 1.41-.08Zm11.48 1.88c.18-.19.52-.19.7 0 .05.04.09.1.11.16.03.06.04.12.04.19 0 .13-.05.26-.15.35-.09.1-.22.15-.35.15s-.26-.05-.35-.15a.355.355 0 0 1-.11-.16.433.433 0 0 1-.04-.19c0-.13.05-.26.15-.35Zm-4.93-1.86a.75.75 0 1 1 1.059-1.06.75.75 0 0 1-1.059 1.06Z"/></svg></button></div><script>(function(win) {
    if (!document.querySelector('.pcb')) {
        return;
    }

    var cbConfig = {
        behaviour: document.querySelector('.pcb').getAttribute('data-behaviour'),
        behaviourLink: document.querySelector('.pcb').getAttribute('data-behaviour-link'),
        revision: document.querySelector('.pcb').getAttribute('data-revision'),
        configTTL: parseInt(document.querySelector('.pcb').getAttribute('data-config-ttl'), 10),
        debugMode: document.querySelector('.pcb').getAttribute('data-debug-mode') === 'true',
        initialState: null,
        initialLsState: null,
        previouslyAccepted: []
    };

    var cbUI = {
        wrapper: document.querySelector('.pcb'),
        banner: {
            element: null,
            btnAccept: null,
            btnReject: null,
            btnConfigure: null
        },
        popup: {
            element: null,
            btnClose: null,
            btnSave: null,
            btnAccept: null,
            btnReject: null,
            checkboxes: null,
        },
        overlay: null,
        badge: null,
        blockedScripts: document.querySelectorAll('script[type^="gdpr-blocker/"]'),
        triggerLinks: cbConfig.behaviourLink ? document.querySelectorAll('a[href*="' + cbConfig.behaviourLink + '"]') : null
    };

    function initUI () {
        // setup banner elements
        cbUI.banner.element = cbUI.wrapper.querySelector('.pcb__banner');
        cbUI.banner.btnAccept = cbUI.banner.element.querySelector('.pcb__btn--accept');
        cbUI.banner.btnReject = cbUI.banner.element.querySelector('.pcb__btn--reject');
        cbUI.banner.btnConfigure = cbUI.banner.element.querySelector('.pcb__btn--configure');

        // setup popup elements
        if (cbUI.wrapper.querySelector('.pcb__popup')) {
            cbUI.popup.element = cbUI.wrapper.querySelector('.pcb__popup');
            cbUI.popup.btnClose = cbUI.wrapper.querySelector('.pcb__popup__close');
            cbUI.popup.btnSave = cbUI.popup.element.querySelector('.pcb__btn--save');
            cbUI.popup.btnAccept = cbUI.popup.element.querySelector('.pcb__btn--accept');
            cbUI.popup.btnReject = cbUI.popup.element.querySelector('.pcb__btn--reject');
            cbUI.popup.checkboxes = cbUI.popup.element.querySelector('input[type="checkbox"]');
            // setup overlay
            cbUI.overlay = cbUI.wrapper.querySelector('.pcb__overlay');
        }

        cbUI.badge = cbUI.wrapper.querySelector('.pcb__badge');

        if (cbConfig.behaviour.indexOf('link') > -1) {
            for (var i = 0; i < cbUI.triggerLinks.length; i++) {
                cbUI.triggerLinks[i].addEventListener('click', function(e) {
                    e.preventDefault();
                    showBannerOrPopup();
                });
            }
        }
    }

    function initState () {
        var lsKeyName = getConfigName();
        var currentConfig = localStorage.getItem(lsKeyName);
        var configIsFresh = checkIfConfigIsFresh();

        if (!configIsFresh || currentConfig === null) {
            if (cbConfig.debugMode) {
                console.log('üç™ Config not found, or configuration expired');
            }

            if (window.publiiCBGCM) {
                gtag('consent', 'default', {
                    'ad_storage': window.publiiCBGCM.defaultState.ad_storage ? 'granted' : 'denied',
                    'ad_personalization': window.publiiCBGCM.defaultState.ad_personalization ? 'granted' : 'denied',
                    'ad_user_data': window.publiiCBGCM.defaultState.ad_user_data ? 'granted' : 'denied',
                    'analytics_storage': window.publiiCBGCM.defaultState.analytics_storage ? 'granted' : 'denied',
                    'personalization_storage': window.publiiCBGCM.defaultState.personalization_storage ? 'granted' : 'denied',
                    'functionality_storage': window.publiiCBGCM.defaultState.functionality_storage ? 'granted' : 'denied',
                    'security_storage': window.publiiCBGCM.defaultState.security_storage ? 'granted' : 'denied'
                });  
                
                if (cbConfig.debugMode) {
                    console.log('üç™ GCMv2 DEFAULT STATE: ' + JSON.stringify({
                        'ad_storage': window.publiiCBGCM.defaultState.ad_storage ? 'granted' : 'denied',
                        'ad_personalization': window.publiiCBGCM.defaultState.ad_personalization ? 'granted' : 'denied',
                        'ad_user_data': window.publiiCBGCM.defaultState.ad_user_data ? 'granted' : 'denied',
                        'analytics_storage': window.publiiCBGCM.defaultState.analytics_storage ? 'granted' : 'denied',
                        'personalization_storage': window.publiiCBGCM.defaultState.personalization_storage ? 'granted' : 'denied',
                        'functionality_storage': window.publiiCBGCM.defaultState.functionality_storage ? 'granted' : 'denied',
                        'security_storage': window.publiiCBGCM.defaultState.security_storage ? 'granted' : 'denied'
                    }));
                }
            }

            showBanner();
        } else if (typeof currentConfig === 'string') {
            if (cbConfig.debugMode) {
                console.log('üç™ Config founded');
            }

            cbConfig.initialLsState = currentConfig.split(',');

            if (window.publiiCBGCM) {
                gtag('consent', 'default', {
                    'ad_storage': getDefaultConsentState(currentConfig, 'ad_storage'),
                    'ad_personalization': getDefaultConsentState(currentConfig, 'ad_personalization'),
                    'ad_user_data': getDefaultConsentState(currentConfig, 'ad_user_data'),
                    'analytics_storage': getDefaultConsentState(currentConfig, 'analytics_storage'),
                    'personalization_storage': getDefaultConsentState(currentConfig, 'personalization_storage'),
                    'functionality_storage': getDefaultConsentState(currentConfig, 'functionality_storage'),
                    'security_storage': getDefaultConsentState(currentConfig, 'security_storage')
                });
                
                if (cbConfig.debugMode) {
                    console.log('üç™ GCMv2 DEFAULT STATE: ' + JSON.stringify({
                        'ad_storage': getDefaultConsentState(currentConfig, 'ad_storage'),
                        'ad_personalization': getDefaultConsentState(currentConfig, 'ad_personalization'),
                        'ad_user_data': getDefaultConsentState(currentConfig, 'ad_user_data'),
                        'analytics_storage': getDefaultConsentState(currentConfig, 'analytics_storage'),
                        'personalization_storage': getDefaultConsentState(currentConfig, 'personalization_storage'),
                        'functionality_storage': getDefaultConsentState(currentConfig, 'functionality_storage'),
                        'security_storage': getDefaultConsentState(currentConfig, 'security_storage')
                    }));
                }
            }

            showBadge();

            if (cbUI.popup.element) {
                var allowedGroups = currentConfig.split(',');
                var checkedCheckboxes = cbUI.popup.element.querySelectorAll('input[type="checkbox"]:checked');

                for (var j = 0; j < checkedCheckboxes.length; j++) {
                    var name = checkedCheckboxes[j].getAttribute('data-group-name');

                    if (name && name !== '-' && allowedGroups.indexOf(name) === -1) {
                        checkedCheckboxes[j].checked = false;
                    }
                }

                for (var i = 0; i < allowedGroups.length; i++) {
                    var checkbox = cbUI.popup.element.querySelector('input[type="checkbox"][data-group-name="' + allowedGroups[i] + '"]');

                    if (checkbox) {
                        checkbox.checked = true;
                    }

                    allowCookieGroup(allowedGroups[i]);
                }
            }
        }

        setTimeout(function () {
            cbConfig.initialState = getInitialStateOfConsents();
        }, 0);
    }

    function checkIfConfigIsFresh () {
        var lastConfigSave = localStorage.getItem('publii-gdpr-cookies-config-save-date');

        if (lastConfigSave === null) {
            return false;
        }

        lastConfigSave = parseInt(lastConfigSave, 10);

        if (lastConfigSave === 0) {
            return true;
        }

        if (+new Date() - lastConfigSave < cbConfig.configTTL * 24 * 60 * 60 * 1000) {
            return true;
        }

        return false;
    }

    function getDefaultConsentState (currentConfig, consentGroup) {
        let configGroups = currentConfig.split(',');

        for (let i = 0; i < configGroups.length; i++) {
            let groupName = configGroups[i];
            let group = window.publiiCBGCM.groups.find(group => group.cookieGroup === groupName);

            if (group && group[consentGroup]) {
                return 'granted';
            }
        }  
        
        if (window.publiiCBGCM.defaultState[consentGroup]) {
            return 'granted'; 
        }
        
        return 'denied';
    }

    function initBannerEvents () {
        cbUI.banner.btnAccept.addEventListener('click', function (e) {
            e.preventDefault();
            acceptAllCookies('banner');
            showBadge();
        }, false);

        if (cbUI.banner.btnReject) {
            cbUI.banner.btnReject.addEventListener('click', function (e) {
                e.preventDefault();
                rejectAllCookies();
                showBadge();
            }, false);
        }

        if (cbUI.banner.btnConfigure) {
            cbUI.banner.btnConfigure.addEventListener('click', function (e) {
                e.preventDefault();
                hideBanner();
                showAdvancedPopup();
                showBadge();
            }, false);
        }
    }

    function initPopupEvents () {
        if (!cbUI.popup.element) {
            return;
        }

        cbUI.overlay.addEventListener('click', function (e) {
            hideAdvancedPopup();
        }, false);

        cbUI.popup.element.addEventListener('click', function (e) {
            e.stopPropagation();
        }, false);

        cbUI.popup.btnAccept.addEventListener('click', function (e) {
            e.preventDefault();
            acceptAllCookies('popup');
        }, false);

        cbUI.popup.btnReject.addEventListener('click', function (e) {
            e.preventDefault();
            rejectAllCookies();
        }, false);

        cbUI.popup.btnSave.addEventListener('click', function (e) {
            e.preventDefault();
            saveConfiguration();
        }, false);

        cbUI.popup.btnClose.addEventListener('click', function (e) {
            e.preventDefault();
            hideAdvancedPopup();
        }, false);
    }

    function initBadgeEvents () {
        if (!cbUI.badge) {
            return;
        }

        cbUI.badge.addEventListener('click', function (e) {
            showBannerOrPopup();
        }, false);
    }

    initUI();
    initState();
    initBannerEvents();
    initPopupEvents();
    initBadgeEvents();

    /**
     * API
     */
    function addScript (src, inline) {
        var newScript = document.createElement('script');

        if (src) {
            newScript.setAttribute('src', src);
        }

        if (inline) {
            newScript.text = inline;
        }

        document.body.appendChild(newScript);
    }

    function allowCookieGroup (allowedGroup) {
        var scripts = document.querySelectorAll('script[type="gdpr-blocker/' + allowedGroup + '"]');
        cbConfig.previouslyAccepted.push(allowedGroup);
    
        for (var j = 0; j < scripts.length; j++) {
            addScript(scripts[j].src, scripts[j].text);
        }

        var groupEvent = new Event('publii-cookie-banner-unblock-' + allowedGroup);
        document.body.dispatchEvent(groupEvent);
        unlockEmbeds(allowedGroup);

        if (cbConfig.debugMode) {
            console.log('üç™ Allowed group: ' + allowedGroup);
        }

        if (window.publiiCBGCM && (!cbConfig.initialLsState || cbConfig.initialLsState.indexOf(allowedGroup) === -1)) {
            let consentResult = {};
            let group = window.publiiCBGCM.groups.find(group => group.cookieGroup === allowedGroup);

            if (group) {
                let foundSomeConsents = false;

                Object.keys(group).forEach(key => {
                    if (key !== 'cookieGroup' && group[key] === true) {
                        consentResult[key] = 'granted';
                        foundSomeConsents = true;
                    }
                });

                if (foundSomeConsents) {
                    gtag('consent', 'update', consentResult);   

                    if (cbConfig.debugMode) {
                        console.log('üç™ GCMv2 UPDATE: ' + JSON.stringify(consentResult));
                    }
                }
            }
        }
    }

    function showBannerOrPopup () {
        if (cbUI.popup.element) {
            showAdvancedPopup();
        } else {
            showBanner();
        }
    }

    function showAdvancedPopup () {
        cbUI.popup.element.classList.add('is-visible');
        cbUI.overlay.classList.add('is-visible');
        cbUI.popup.element.setAttribute('aria-hidden', 'false');
        cbUI.overlay.setAttribute('aria-hidden', 'false');
    }

    function hideAdvancedPopup () {
        cbUI.popup.element.classList.remove('is-visible');
        cbUI.overlay.classList.remove('is-visible');
        cbUI.popup.element.setAttribute('aria-hidden', 'true');
        cbUI.overlay.setAttribute('aria-hidden', 'true');
    }

    function showBanner () {
        cbUI.banner.element.classList.add('is-visible');
        cbUI.banner.element.setAttribute('aria-hidden', 'false');
    }

    function hideBanner () {
        cbUI.banner.element.classList.remove('is-visible');
        cbUI.banner.element.setAttribute('aria-hidden', 'true');
    }

    function showBadge () {
        if (!cbUI.badge) {
            return;
        }

        cbUI.badge.classList.add('is-visible');
        cbUI.badge.setAttribute('aria-hidden', 'false');
    }

    function getConfigName () {
        var lsKeyName = 'publii-gdpr-allowed-cookies';

        if (cbConfig.revision) {
            lsKeyName = lsKeyName + '-v' + parseInt(cbConfig.revision, 10);
        }

        return lsKeyName;
    }

    function storeConfiguration (allowedGroups) {
        var lsKeyName = getConfigName();
        var dataToStore = allowedGroups.join(',');
        localStorage.setItem(lsKeyName, dataToStore);

        if (cbConfig.configTTL === 0) {
            localStorage.setItem('publii-gdpr-cookies-config-save-date', 0);

            if (cbConfig.debugMode) {
                console.log('üç™ Store never expiring configuration');
            }
        } else {
            localStorage.setItem('publii-gdpr-cookies-config-save-date', +new Date());
        }
    }

    function getInitialStateOfConsents () {
        if (!cbUI.popup.element) {
            return [];
        }

        var checkedGroups = cbUI.popup.element.querySelectorAll('input[type="checkbox"]:checked');
        var groups = [];

        for (var i = 0; i < checkedGroups.length; i++) {
            var allowedGroup = checkedGroups[i].getAttribute('data-group-name');

            if (allowedGroup !== '') {
                groups.push(allowedGroup);
            }
        }

        if (cbConfig.debugMode) {
            console.log('üç™ Initial state: ' + groups.join(', '));
        }

        return groups;
    }

    function getCurrentStateOfConsents () {
        if (!cbUI.popup.element) {
            return [];
        }

        var checkedGroups = cbUI.popup.element.querySelectorAll('input[type="checkbox"]:checked');
        var groups = [];

        for (var i = 0; i < checkedGroups.length; i++) {
            var allowedGroup = checkedGroups[i].getAttribute('data-group-name');

            if (allowedGroup !== '') {
                groups.push(allowedGroup);
            }
        }

        if (cbConfig.debugMode) {
            console.log('üç™ State to save: ' + groups.join(', '));
        }

        return groups;
    }

    function getAllGroups () {
        if (!cbUI.popup.element) {
            return [];
        }

        var checkedGroups = cbUI.popup.element.querySelectorAll('input[type="checkbox"]');
        var groups = [];

        for (var i = 0; i < checkedGroups.length; i++) {
            var allowedGroup = checkedGroups[i].getAttribute('data-group-name');

            if (allowedGroup !== '') {
                groups.push(allowedGroup);
            }
        }

        return groups;
    }

    function acceptAllCookies (source) {
        var groupsToAccept = getAllGroups();
        storeConfiguration(groupsToAccept);

        for (var i = 0; i < groupsToAccept.length; i++) {
            var group = groupsToAccept[i];

            if (cbConfig.initialState.indexOf(group) > -1 || cbConfig.previouslyAccepted.indexOf(group) > -1) {
                if (cbConfig.debugMode) {
                    console.log('üç™ Skip previously activated group: ' + group);
                }

                continue;
            }

            allowCookieGroup(group);
        }

        if (cbUI.popup.element) {
            var checkboxesToCheck = cbUI.popup.element.querySelectorAll('input[type="checkbox"]');

            for (var j = 0; j < checkboxesToCheck.length; j++) {
                checkboxesToCheck[j].checked = true;
            }
        }

        if (cbConfig.debugMode) {
            console.log('üç™ Accept all cookies: ', groupsToAccept.join(', '));
        }

        if (source === 'popup') {
            hideAdvancedPopup();
        } else if (source === 'banner') {
            hideBanner();
        }
    }

    function rejectAllCookies () {
        if (cbConfig.debugMode) {
            console.log('üç™ Reject all cookies');
        }

        storeConfiguration([]);
        setTimeout(function () {
            window.location.reload();
        }, 100);
    }

    function saveConfiguration () {
        var groupsToAccept = getCurrentStateOfConsents();
        storeConfiguration(groupsToAccept);

        if (cbConfig.debugMode) {
            console.log('üç™ Save new config: ', groupsToAccept.join(', '));
        }

        if (reloadIsNeeded(groupsToAccept)) {
            setTimeout(function () {
                window.location.reload();
            }, 100);
            return;
        }

        for (var i = 0; i < groupsToAccept.length; i++) {
            var group = groupsToAccept[i];

            if (cbConfig.initialState.indexOf(group) > -1 || cbConfig.previouslyAccepted.indexOf(group) > -1) {
                if (cbConfig.debugMode) {
                    console.log('üç™ Skip previously activated group: ' + group);
                }

                continue;
            }

            allowCookieGroup(group);
        }

        hideAdvancedPopup();
    }

    function reloadIsNeeded (groupsToAccept) {
        // check if user rejected consent for initial groups
        var initialGroups = cbConfig.initialState;
        var previouslyAcceptedGroups = cbConfig.previouslyAccepted;
        var groupsToCheck = initialGroups.concat(previouslyAcceptedGroups);

        for (var i = 0; i < groupsToCheck.length; i++) {
            var groupToCheck = groupsToCheck[i];

            if (groupToCheck !== '' && groupsToAccept.indexOf(groupToCheck) === -1) {
                if (cbConfig.debugMode) {
                    console.log('üç™ Reload is needed due lack of: ', groupToCheck);
                }

                return true;
            }
        }

        return false;
    }

    function unlockEmbeds (cookieGroup) {
        var iframesToUnlock = document.querySelectorAll('.pec-wrapper[data-consent-group-id="' + cookieGroup + '"]');

        for (var i = 0; i < iframesToUnlock.length; i++) {
            var iframeWrapper = iframesToUnlock[i];
            iframeWrapper.querySelector('.pec-overlay').classList.remove('is-active');
            iframeWrapper.querySelector('.pec-overlay').setAttribute('aria-hidden', 'true');
            var iframe = iframeWrapper.querySelector('iframe');
            iframe.setAttribute('src', iframe.getAttribute('data-consent-src'));
        }
    }

    win.publiiEmbedConsentGiven = function (cookieGroup) {
        // it will unlock embeds
        allowCookieGroup(cookieGroup);

        var checkbox = cbUI.popup.element.querySelector('input[type="checkbox"][data-group-name="' + cookieGroup + '"]');

        if (checkbox) {
            checkbox.checked = true;
        }

        var groupsToAccept = getCurrentStateOfConsents();
        storeConfiguration(groupsToAccept);

        if (cbConfig.debugMode) {
            console.log('üç™ Save new config: ', groupsToAccept.join(', '));
        }
    }
})(window);</script></body></html>